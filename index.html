<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>ARACEA â€“ AsociaciÃ³n de Rescate Animal</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{margin:0;font-family:Arial;background:#121212;color:white}
header{background:#ff7a00;padding:12px;text-align:center;font-size:18px;font-weight:bold}
.container{padding:15px}
.card{background:#1e1e1e;padding:12px;border-radius:8px;margin-bottom:10px}
button{width:100%;padding:12px;margin-top:10px;background:#ff7a00;border:none;color:white;font-size:16px;border-radius:8px}
input{width:100%;padding:10px;margin-top:8px;border-radius:6px;border:none}
.hidden{display:none}
.small{font-size:14px;color:#ccc}
</style>
</head>
<body>

<header>ARACEA â€“ AsociaciÃ³n de Rescate Animal</header>

<div class="container" id="typesView">
<h3>Tipos de LoterÃ­a</h3>
<div id="typesList"></div>
</div>

<div class="container hidden" id="yearsView">
<h3 id="yearsTitle"></h3>
<div id="yearsList"></div>
<input id="newYear" type="number" placeholder="AÃ±adir nuevo aÃ±o">
<button onclick="addYear()">â• AÃ±adir aÃ±o</button>
<button onclick="backTypes()">â¬…ï¸ Volver</button>
</div>

<div class="container hidden" id="campaignView">
<h3 id="campTitle"></h3>
<button onclick="showAddSale()">â• AÃ±adir venta</button>
<button onclick="showHistory()">ğŸ“œ Historial</button>
<button onclick="showSummary()">ğŸ“Š Resumen</button>
<button onclick="backYears()">â¬…ï¸ Volver</button>
</div>

<div class="container hidden" id="saleView">
<h3>Nueva venta</h3>
<input id="saleName" placeholder="Nombre">
<input id="saleEnt" type="number" placeholder="DÃ©cimos entregados">
<input id="salePag" type="number" placeholder="DÃ©cimos pagados">
<button onclick="saveSale()">Guardar</button>
<button onclick="backCampaign()">Cancelar</button>
</div>

<div class="container hidden" id="historyView">
<h3>Historial</h3>
<div id="historyList"></div>
<button onclick="backCampaign()">Volver</button>
</div>

<div class="container hidden" id="summaryView">
<h3>Resumen</h3>
<div id="summaryData"></div>
<button onclick="backCampaign()">Volver</button>
</div>

<script>
let data={
types:{
"Navidad":{years:{2025:[],2026:[]}},
"NiÃ±o":{years:{2025:[],2026:[]}},
"Semanal":{years:{2025:[],2026:[]}},
"Mensual":{years:{2025:[],2026:[]}}
}
};

let currentType=null,currentYear=null;

function show(id){
["typesView","yearsView","campaignView","saleView","historyView","summaryView"]
.forEach(x=>document.getElementById(x).classList.add("hidden"));
document.getElementById(id).classList.remove("hidden");
}

function loadTypes(){
let list=document.getElementById("typesList");
list.innerHTML="";
Object.keys(data.types).forEach(t=>{
let d=document.createElement("div");
d.className="card";
d.innerText=t;
d.onclick=()=>openYears(t);
list.appendChild(d);
});
}

function openYears(type){
currentType=type;
yearsTitle.innerText=type+" - AÃ±os";
let list=document.getElementById("yearsList");
list.innerHTML="";
Object.keys(data.types[type].years).forEach(y=>{
let d=document.createElement("div");
d.className="card";
d.innerText=y;
d.onclick=()=>openCampaign(y);
list.appendChild(d);
});
show("yearsView");
}

function addYear(){
let y=newYear.value;
if(!y)return alert("Pon un aÃ±o");
if(data.types[currentType].years[y])return alert("Ese aÃ±o ya existe");
data.types[currentType].years[y]=[];
newYear.value="";
openYears(currentType);
}

function openCampaign(year){
currentYear=year;
campTitle.innerText=currentType+" "+year;
show("campaignView");
}

function showAddSale(){show("saleView")}
function backTypes(){show("typesView")}
function backYears(){show("yearsView")}
function backCampaign(){show("campaignView")}

function saveSale(){
let n=saleName.value.trim(),e=parseInt(saleEnt.value),p=parseInt(salePag.value);
if(!n||isNaN(e)||isNaN(p))return alert("Rellena todo");
data.types[currentType].years[currentYear].push({n,e,p});
saleName.value="";saleEnt.value="";salePag.value="";
backCampaign();
}

function showHistory(){
let h=document.getElementById("historyList");
h.innerHTML="";
data.types[currentType].years[currentYear].forEach(s=>{
let d=document.createElement("div");
d.className="card";
d.innerHTML=`<b>${s.n}</b><div class="small">Ent: ${s.e} | Pag: ${s.p} | Debe: ${s.e-s.p}</div>`;
h.appendChild(d);
});
show("historyView");
}

function showSummary(){
let v=0,p=0;
data.types[currentType].years[currentYear].forEach(s=>{v+=s.e;p+=s.p});
summaryData.innerHTML=`
<div class="card">ğŸŸï¸ Vendidos: ${v}</div>
<div class="card">ğŸ’¶ Pagados: ${p}</div>
<div class="card">âš ï¸ Pendientes: ${v-p}</div>
<div class="card">ğŸŸ¢ Beneficio ARACEA: ${v*3} â‚¬</div>`;
show("summaryView");
}

loadTypes();
</script>
</body>
</html>
