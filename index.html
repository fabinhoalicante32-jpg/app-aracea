<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>ARACEA - LoterÃ­a Solidaria</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{margin:0;font-family:Arial;background:#121212;color:#fff}
header{background:#ff7a00;padding:10px;text-align:center;font-weight:bold}
.logo{max-height:60px;margin:10px auto;display:block}
.container{padding:15px}
button{width:100%;padding:12px;margin:6px 0;border:none;border-radius:8px;background:#ff7a00;color:#000;font-weight:bold}
.card{background:#1e1e1e;padding:12px;border-radius:10px;margin-bottom:12px}
input,select{width:100%;padding:10px;margin-top:6px;border-radius:6px;border:none}
.hidden{display:none}
hr{border:1px solid #333}
.small{font-size:14px;color:#ccc}
</style>
</head>
<body>

<header>ARACEA - LoterÃ­a Solidaria</header>

<div class="container">

<div id="home">
<img src="20220603_103609.png" class="logo">
<button onclick="openCamp('Navidad')">ğŸ„ Navidad</button>
<button onclick="openCamp('El NiÃ±o')">ğŸ« El NiÃ±o</button>
<button onclick="openCamp('Mensual')">ğŸ« Mensual</button>
<button onclick="openCamp('Semanal')">ğŸ« Semanal</button>
</div>

<div id="campView" class="hidden">

<div class="card">
âš™ï¸ <b>ConfiguraciÃ³n</b>
<input type="number" id="precioDecimo" placeholder="Precio por dÃ©cimo (â‚¬)">
<input type="number" id="beneficioDecimo" placeholder="Beneficio ARACEA por dÃ©cimo (â‚¬)">
<button onclick="guardarConfig()">Guardar configuraciÃ³n</button>
</div>

<div class="card">
ğŸ€ <b>LoterÃ­a Geles</b>
<input type="number" id="decimosCasa" placeholder="DÃ©cimos recogidos">
<input type="number" id="decimosDevueltosCasa" placeholder="DÃ©cimos devueltos a la casa">
<input type="number" id="dineroPagadoCasa" placeholder="Dinero pagado a la casa (â‚¬)">
<button onclick="guardarCasa()">Guardar datos casa</button>
</div>

<div class="card">
ğŸ§‘ <b>Persona</b>
<input id="nombre" placeholder="Nombre persona">
<input type="number" id="entregados" placeholder="DÃ©cimos entregados">
<input type="number" id="devueltos" placeholder="DÃ©cimos devueltos">
<input type="number" id="pagados" placeholder="DÃ©cimos pagados">
<select id="formaPago">
<option>Efectivo</option>
<option>Bizum</option>
<option>Transferencia</option>
</select>
<button onclick="guardarPersona()">Guardar persona</button>
</div>

<div class="card">
ğŸ“œ <b>Historial</b>
<div id="listaPersonas"></div>
</div>

<div class="card">
ğŸ—’ï¸ <b>Estado actual</b>
<div id="estado"></div>
</div>

<button onclick="volver()">â¬… Volver</button>

</div>
</div>

<script>
let data=JSON.parse(localStorage.getItem("araceaFinal"))||{};
let actual="";

function save(){localStorage.setItem("araceaFinal",JSON.stringify(data));}

function openCamp(c){
actual=c;
if(!data[c]){
data[c]={config:{precio:23,beneficio:3},casa:{recogidos:0,devueltos:0,pagado:0},personas:[]};
}
home.classList.add("hidden");
campView.classList.remove("hidden");
precioDecimo.value=data[c].config.precio;
beneficioDecimo.value=data[c].config.beneficio;
render();
}

function volver(){
campView.classList.add("hidden");
home.classList.remove("hidden");
}

function guardarConfig(){
data[actual].config.precio=Number(precioDecimo.value);
data[actual].config.beneficio=Number(beneficioDecimo.value);
save();
render();
}

function guardarCasa(){
let casa=data[actual].casa;
casa.recogidos=Number(decimosCasa.value||0);
casa.devueltos=Number(decimosDevueltosCasa.value||0);
casa.pagado=Number(dineroPagadoCasa.value||0);
save();
render();
}

function guardarPersona(){
let p={
n:nombre.value,
e:Number(entregados.value||0),
d:Number(devueltos.value||0),
p:Number(pagados.value||0),
f:formaPago.value
};
if(!p.n)return alert("Nombre obligatorio");
data[actual].personas.push(p);
nombre.value=entregados.value=devueltos.value=pagados.value="";
save();
render();
}

function render(){
let camp=data[actual];
let lista="";
let totalVendidos=0;
camp.personas.forEach((p,i)=>{
let vendidos=p.p;
totalVendidos+=vendidos;
lista+=`${p.n} - Ent:${p.e} Dev:${p.d} Pag:${p.p} (${p.f})<hr>`;
});
listaPersonas.innerHTML=lista||"Sin personas aÃºn";

let totalCobrado=totalVendidos*camp.config.precio;
let beneficio=totalVendidos*camp.config.beneficio;
let paraCasa=totalCobrado-beneficio;
let stock=camp.casa.recogidos-totalVendidos+camp.casa.devueltos;

estado.innerHTML=`
Total vendido: ${totalCobrado}â‚¬<br>
DÃ©cimos vendidos: ${totalVendidos}<br>
Beneficio ARACEA: ${beneficio}â‚¬<br>
ğŸ€ LoterÃ­a Geles: ${paraCasa}â‚¬<br>
DÃ©cimos disponibles: ${stock}
`;
}
</script>

</body>
</html>
